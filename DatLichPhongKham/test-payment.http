### Test MoMo Payment API
### Sử dụng file này với REST Client extension trong VS Code

@baseUrl = http://localhost:8080
@token = YOUR_JWT_TOKEN_HERE
@paymentId = 1
@appointmentId = 1

### 1. Login để lấy JWT Token
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "your_username",
  "password": "your_password"
}

### 2. Tạo Payment Request (MOMO)
POST {{baseUrl}}/api/payments
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "appointmentId": {{appointmentId}},
  "amount": 50000,
  "paymentMethod": "MOMO"
}

### 3. Tạo Payment Request (CASH - Offline)
POST {{baseUrl}}/api/payments
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "appointmentId": {{appointmentId}},
  "amount": 50000,
  "paymentMethod": "CASH"
}

### 4. Xem danh sách payments của user hiện tại
GET {{baseUrl}}/api/payments/me?page=0&size=10
Authorization: Bearer {{token}}

### 5. Xem chi tiết payment
GET {{baseUrl}}/api/payments/{{paymentId}}
Authorization: Bearer {{token}}

### 6. Kiểm tra trạng thái payment
GET {{baseUrl}}/api/payments/{{paymentId}}/status
Authorization: Bearer {{token}}

### 7. Xem payments theo appointment
GET {{baseUrl}}/api/payments/appointment/{{appointmentId}}?page=0&size=10
Authorization: Bearer {{token}}

### 8. Xem tất cả payments (ADMIN/EMPLOYEE only)
GET {{baseUrl}}/api/payments?page=0&size=10
Authorization: Bearer {{token}}

### 9. Test MoMo Callback (Thành công)
POST {{baseUrl}}/api/payments/momo-callback
Content-Type: application/json

{
  "partnerCode": "MOMOD3WW20251129_TEST",
  "orderId": "APPOINTMENT_1_1703056200000",
  "requestId": "1703056200000",
  "amount": 5000000,
  "orderInfo": "Thanh toan dat coc cho lich hen #1",
  "orderType": "momo_wallet",
  "transId": "1234567890",
  "resultCode": 0,
  "message": "Success",
  "payType": "webApp",
  "responseTime": "2024-12-20T10:35:00",
  "extraData": "",
  "signature": "calculated_signature_here"
}

### 10. Test MoMo Callback (Thất bại - User cancel)
POST {{baseUrl}}/api/payments/momo-callback
Content-Type: application/json

{
  "partnerCode": "MOMOD3WW20251129_TEST",
  "orderId": "APPOINTMENT_1_1703056200000",
  "requestId": "1703056200000",
  "amount": 5000000,
  "orderInfo": "Thanh toan dat coc cho lich hen #1",
  "orderType": "momo_wallet",
  "transId": "1234567890",
  "resultCode": 1000,
  "message": "User cancel payment",
  "payType": "webApp",
  "responseTime": "2024-12-20T10:35:00",
  "extraData": "",
  "signature": "calculated_signature_here"
}


